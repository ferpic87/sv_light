/*! hideshare - v0.1.2 - 2014-10-12
 * https://github.com/arnonate/hideshare
 * Copyright (c) 2014 Nate Arnold; Licensed MIT */
! function(a, b) {
    "use strict";
    var c = function(a, c) {
        this.elem = a, this.$elem = b(a), this.options = c
    };
    c.prototype = {
        defaults: {
            link: document.URL,
            title: document.title,
            description: "",
            media: null,
            facebook: !0,
            twitter: !0,
            pinterest: !0,
            telegram: !0,
            hyperlink: !0,
            linkedin: !0,
			whatsapp: !0,
            position: "bottom",
            speed: 100
        },
        init: function() {
            return this.config = b.extend({}, this.defaults, this.options), this.wrapHideshare(), this
        },
        wrapHideshare: function() {
            var c = c,
                d = this.$elem.outerWidth(),
                e = this.$elem.outerHeight(),
                f = 0,
                g = this.config.position,
                h = this.config.speed,
                i = this.config.title,
                j = this.config.link,
                k = this.config.media,
                l = this.config.description,
                hl = '<li><a class="hideshare-hyperlink" href="#"><i class="fa fa-link fa-3x"></i><span>Copia link</span></a></li>',
                m = '<li><a class="hideshare-facebook" href="#"><i class="fab fa-facebook-square fa-3x"></i><span>Facebook</span></a></li>',
                n = '<li><a class="hideshare-twitter" href="#"><i class="fab fa-twitter-square fa-3x"></i><span>Twitter</span></a></li>',
                o = '<li><a class="hideshare-pinterest" href="#" data-pin-do="buttonPin" data-pin-config="above"><i class="fab fa-pinterest-square fa-3x"></i><span>Pinterest</span></a></li>',
                p = '<li><a class="hideshare-telegram" href="#"><i class="fab fa-telegram fa-3x"></i><span>Telegram</span></a></li>',
                q = '<li><a class="hideshare-linkedin" href="#"><i class="fab fa-linkedin-square fa-3x"></i><span>Linked In</span></a></li>',
				wh = '<li><a class="hideshare-whatsapp" href="#"><i class="fab fa-whatsapp fa-3x"></i><span>WhatsApp</span></a></li>';
            this.config.hyperlink ? (c = hl, f += 50) : (c = "", f = f), this.config.facebook ? (c += m, f += 50) : (c += "", f = f), this.config.twitter ? (c += n, f += 50) : (c = c, f = f), this.config.whatsapp ? (c += wh, f += 50) : (c = c, f = f), this.config.telegram ? (c += p, f += 50) : (c = c, f = f), this.config.pinterest ? (c += o , f += 50) : (c = c, f = f), this.config.linkedin ? (c += q, f += 50) : (c = c, f = f), d > f && (f = d);
            var r = '<ul class="hideshare-list" style="z-index: 100; display: none; left: -30px; width: ' + (f+40) + 'px; top:-60px">' + c + "</ul>";
            this.$elem.addClass("hideshare-btn").wrap("<div class='hideshare-wrap' style='width:" + d + "px; height:" + e + "px;' />"), this.$wrap = this.$elem.parent(), b(r).insertAfter(this.$elem);
			var show = function(a, b, c, d, e) {
                    var f = {};
                    f = "right" === a ? {
                        left: b + 10 + "px",
                        right: -(b + 10) + "px",
                        opacity: "toggle"
                    } : "left" === a ? {
                        left: -(b + 10) + "px",
                        right: b + 10 + "px",
                        opacity: "toggle"
                    } : "top" === a ? {
                        top: -(c + 10) + "px",
                        bottom: c + 10 + "px",
                        opacity: "toggle"
                    } : {
                        top: c + 10 + "px",
                        bottom: -(c + 10) + "px",
                        left: "0px",
                        opacity: "toggle"
                    }, e.find(".hideshare-list").animate(f, d, "linear", function() {
							e.find(".hideshare-list").show(); // safety showing
						}
					).addClass("shown")
                },
                hide = function(a, b) {
                    var c = {
                        top: "0px",
                        left: "-30px",
                        opacity: "toggle"
                    };
					b.find(".hideshare-list").animate(c, a, "linear", function() {
							b.find(".hideshare-list").hide(); // safety hiding
						}
					).removeClass("shown")
                };
            this.$elem.unbind().click(function(a) {
				console.log("click");
                var c = b(a.currentTarget).parent(),
                f = c.find(".hideshare-list");
				if (!f.hasClass("shown")) {
					$("body").click(function() {
						$( "ul.shown" ).each(function( ) {
							var thisElement = $(this);
							thisElement.hide().removeClass("shown");
						});
						$("body").unbind();
					});
				}
				return f.hasClass("shown") ? hide(h, c) : show(g, d, e, h, c), !1
            });
            var u = function() {
                   ga('send', 'event', 'Ricetta', 'condividiRicetta', j);
                   ga('send', 'event', 'Ricetta', 'condividi', 'facebook');
                   a.open("https://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(j), "Facebook", "menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600");

					//a.open("https://www.facebook.com/dialog/share?app_id=1146686982074430&display=popup&amp;caption=testt&link="+encodeURIComponent(j)+"&redirect_uri="+encodeURIComponent("http://www.apphost.it/ricette/"), "Facebook", "menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600");

					/*var xmlhttp = new XMLHttpRequest();

					xmlhttp.onreadystatechange = function () {
						if (xmlhttp.readyState == 4) {
							console.log(xmlhttp.status);
						}
					}

					xmlhttp.open("POST", "https://graph.facebook.com/me/feed?" +
							"message=" +encodeURIComponent(j)+
							"&access_token=1146686982074430|6P6VMCkywI_liTV-L7F-98IimBo", true);
					xmlhttp.send();*/
				},
                v0 = function() {
                  ga('send', 'event', 'Ricetta', 'condividiRicetta', j);
                  ga('send', 'event', 'Ricetta', 'condividi', 'link');
                  copyTextToClipboard(j);
                  showToastMessage("Ricetta copiata negli appunti!");
                },
                v = function() {
                  ga('send', 'event', 'Ricetta', 'condividiRicetta', j);
                  ga('send', 'event', 'Ricetta', 'condividi', 'twitter');
                    a.open("https://twitter.com/intent/tweet?original_referer=" + encodeURIComponent(j) + "&text=" + encodeURIComponent(i+" @svuotafrigo") + "%20" + encodeURIComponent(j), "Twitter", "menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")
                },
                w = function() {
                  ga('send', 'event', 'Ricetta', 'condividiRicetta', j);
                  ga('send', 'event', 'Ricetta', 'condividi', 'pinterest');                    a.open("//pinterest.com/pin/create/button/?url=" + encodeURIComponent(j) + "&media=" + encodeURIComponent(k) + "&description=" + encodeURIComponent(i), "Pinterest", "menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")
                },
				whs = function() {
          ga('send', 'event', 'Ricetta', 'condividiRicetta', j);
					ga('send', 'event', 'Ricetta', 'condividi', 'whatsapp');                    a.open("whatsapp://send?text=Vedi la ricetta che ho trovato con Svuotafrigo: "+encodeURIComponent(j), "Whatsapp", "menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")
                },
                x = function() {
                  ga('send', 'event', 'Ricetta', 'condividiRicetta', j);
                  ga('send', 'event', 'Ricetta', 'condividi', 'telegram');                    a.open("https://telegram.me/share/url?url=" + encodeURIComponent(j)+"&text=Vedi la ricetta che ho trovato con Svuotafrigo", "Telegram", '_blank')
                },
                y = function() {
                    a.open("//www.linkedin.com/shareArticle?mini=true&url=" + encodeURIComponent(j) + "&title=" + encodeURIComponent(i) + "&source=" + encodeURIComponent(j), "LinkedIn", "menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")
                };
            this.$wrap.find(".hideshare-hyperlink").click(function() {
                return v0(), !1
            }),this.$wrap.find(".hideshare-facebook").click(function() {
                return u(), !1
            }), this.$wrap.find(".hideshare-twitter").click(function() {
                return v(), !1
            }), this.$wrap.find(".hideshare-whatsapp").click(function() {
                return whs(), !1
            }), this.$wrap.find(".hideshare-pinterest").click(function() {
                return w(), !1
            }), this.$wrap.find(".hideshare-telegram").click(function() {
                return x(), !1
            }), this.$wrap.find(".hideshare-linkedin").click(function() {
                return y(), !1
            })
        }
    }, c.defaults = c.prototype.defaults, b.fn.hideshare = function(a) {
        return this.each(function() {
            new c(this, a).init()
        })
    }, a.Hideshare = c
}(window, jQuery);
